# This is an automated backup - check out https://outlands.uorazorscripts.com/script/5ac20eac-f0e5-466f-8b8f-d87ece1f21f2 for latest
# Automation by Jaseowns
## Script: combine stacks of gold so they are pretty WIP
## Created by: Jaseowns#6694
#############################################

// combine stacks of gold so they are pretty

@setvar! myJoldContainer 0x412E4672

@clearignore 
while findtype "gold coin" myJoldContainer as item
    lift item 60000
    drop myJoldContainer -1 -1 -1
    wait 650
    @ignore item
endwhile
@clearignore 

if counttype "gold coin" myJoldContainer as total
    overhead "Starting total: {{total}}" 88
endif

removelist goldchallenege
createlist goldchallenege

removelist goldchallenegemove
createlist goldchallenegemove

while findtype "gold coin" myJoldContainer as item
    getlabel item desc
    if "gold coin : 60000" in desc
        overhead "We are ignoring you: {{desc}}"  34
        pushlist goldchallenege item
    else
        pushlist goldchallenegemove item
    endif
    @ignore item
endwhile
@clearignore 
foreach goldpile in goldchallenege
    @ignore goldpile
endfor

// right here, we only have gold that is not in a 60k stack

if counttype "gold coin" myJoldContainer as nextTotal
    overhead "Total minus 60k stacks: {{nextTotal}}" 33
    if 60000 < nextTotal
        
        // We need to start moving piles of gold
        // we have to calc the difference between two piles
        
        // we could try and drop the pile onto the other pile
        // if it success, we can just replay the script 
        // if it no success, we need to do some if thens
        
        foreach goldpile in goldchallenegemove
            getlabel goldpile desc
            
        endfor

        while findtype "gold coin" myJoldContainer as item
            lift item 1
            drop myJoldContainer -1 -1 -1
            wait 650
            
            
            if "gold coin : 60000" in desc
                overhead "We are ignoring you: {{desc}}"  34
                pushlist goldchallenege item
            endif
            @ignore item
        endwhile
    
    
    
        overhead "We got work to do bros" 88
    else
        overhead "we done" 34
    endif
endif

foreach goldpile in goldchallenege
    getlabel goldpile desc
    //overhead "Pile {{index}}: {{desc}}"
endfor

