# One hotkey mage cycle by Jaseowns
# UO Outlands - WIP

// Beta client for cooldowns
// cooldowns for mushrooms, mana vampire and healpots
// for now using timers

@setvar! cdLightning 60000
@setvar! cdMagicArrow 60000
@setvar! cdHarm 60000
@setvar! cdFireball 60000
@setvar! cdEvilOmen 30000

if not timerexists magicArrowTimer
    createtimer magicArrowTimer
    settimer magicArrowTimer cdMagicArrow
endif

if not timerexists lightningTimer
    createtimer lightningTimer
    settimer lightningTimer cdLightning
endif

if not timerexists harmTimer
    createtimer harmTimer
    settimer harmTimer cdHarm
endif

if not timerexists fireballTimer
    createtimer fireballTimer
    settimer fireballTimer cdFireball
endif

if not timerexists evilOmenTimer
    createtimer evilOmenTimer
    settimer evilOmenTimer cdEvilOmen
endif


say "all kill"
wait 200
while targetexists 
    // wait
    wait 50
endwhile
@setvar myKillTarget lasttarget 

getlabel myKillTarget desc
overhead desc

while not targetexists and not dead myKillTarget
    cast 'Curse'
    wait 50
endwhile
target myKillTarget
wait 500


while not targetexists and not dead myKillTarget
    cast 'mana drain'
    wait 50
endwhile
target myKillTarget
wait 500

if timer evilOmenTimer >= cdEvilOmen
    say "[EvilOmen"
    settimer evilOmenTimer 0
    wait 500
endif


if timer lightningTimer >= cdLightning
    while not targetexists and not dead myKillTarget
        cast 'Lightning'
        wait 50
    endwhile
    target myKillTarget
    settimer lightningTimer 0
    wait 500
endif

if timer magicArrowTimer >= cdMagicArrow
    while not targetexists and not dead myKillTarget
        cast 'magic arrow'
        wait 50
    endwhile
    target myKillTarget
    settimer magicArrowTimer 0
    wait 500
endif

if timer harmTimer >= cdHarm
    while not targetexists and not dead myKillTarget
        cast 'harm'
        wait 50
    endwhile
    target myKillTarget
    settimer harmTimer 0
    wait 500
endif

if timer fireballTimer >= cdFireball
    while not targetexists and not dead myKillTarget
        cast 'fireball'
        wait 50
    endwhile
    target myKillTarget
    settimer fireballTimer 0
    wait 500
endif

while not dead myKillTarget

    if mana > 40
        while not targetexists and mana > 40
            cast 'Flamestrike'
            wait 50
        endwhile
        target myKillTarget
    elseif not findbuff "actively meditating" and findtype "mushroom" backpack as mushy
        dclick mushy
        if mana < 40 and not findbuff "actively meditating"
            useskill 'meditation'
        endif
    elseif not findbuff "actively meditating" 
        useskill 'meditation'
    endif

    wait 50
endwhile
wait 500



// curse
// mana drain
// magic arrrow
// harm
// fireball
// lightening
